<extend name="Base/base"/>
<block name="body">
    <!-- left_side_bar start  -->
    <section class="section4">
        <div class="container">
            <div class="row">
                <!-- 二级页面的左边导航栏 -->
                <div class="col-lg-2 subpage">
                    <ul class="list-group">
                    <foreach name="results" item="result" key="$key">
                        <li class="list-group-item">
                            <a href="/home/list?id={$result[id]}"> {$result[modulename]} </a>
                        </li>
                    </foreach>
                    </ul>
                </div>

                <!-- right_content start -->
                <div class="col-lg-10">
                    <div class="panel panel-primary">
                        <div class="panel-heading"> {$thisMod[modulename]} </div>
                        <div class="panel-body">
                            <ul class="list-group">
                                <foreach name="modArticles" item="article">
                                    <li class="list-group-item">
                                        <a href="/home/show?id={$article[id]}"> {$article[title]}
                                            <if condition="($article[addtime] gt strtotime('yesterday'))">
                                            <span class="set-new"></span>
                                            </if>
                                            <!-- todo isstickies how to set? -->
                                            <if condition="($article[isstickies] eq 0)">
                                            <span class="set-ding"></span>
                                            </if>
                                        </a>
                                        <span class="pull-right">{:date('Y-m-d H:i:s', $article[addtime])}</span>
                                    </li>
                                </foreach>
                            </ul>
                        </div>
                    </div>

                    <!-- 二级页面分页 -->
                    <if condition="($pageNum gt 1)">
                    <nav>
                        <ul class="pagination">
                            <li>
                                <a href="/home/list?id={$thisMod[id]}&page=0" aria-label="top">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <?php
                                $start = ($page - 2) < 0 ? 0 : ($page - 2);
                                $end = ($page + 2) > ($pageNum -1) ? ($pageNum -1) : ($page + 2);

                                for($i = $start; $i <= $end; ++$i) {
                                    if($i == $page) {
                            ?>
                                <li class="active"><a href="/home/list?id=<?php echo ($thisMod[id]); ?>&page=<?php echo ($i); ?>">{$i+1}</a></li>
                            <?php } else {?>
                                <li><a href="/home/list?id=<?php echo ($thisMod[id]); ?>&page=<?php echo ($i); ?>"><?php echo ($i+1); ?></a></li>
                            <?php }
                            }?>
                            <li>
                                <a href="/home/list?id={$thisMod[id]}&page={$pageNum-1}" aria-label="bottom">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    </if>
                </div>
                <!-- right_content end -->
            </div>
        </div>
    </section>
    <!-- left_side_bar end  -->


</block>